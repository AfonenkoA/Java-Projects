# Платформа управления хостингом сайтов

## Overall Description

Реализовать веб-сервис для хостинга статических и динамических веб-сайтов. Сервис должен предоставлять пользователям возможность загружать файлы своих сайтов, управлять доменными именами, мониторить использование ресурсов (трафик, дисковое пространство) и администрировать базы данных. 

## Product Functions

-   Регистрация и аутентификация пользователей.
-   Управление профилем и тарифным планом пользователя.
-   Загрузка, хранение и управление файлами веб-сайтов.
-   Привязка и управление доменными именами.
-   Мониторинг использования ресурсов (трафик, дисковое пространство, операции с БД).
-   Просмотр статистики и аналитики по сайтам.
-   Система биллинга и управления подпиской.

## System Features

### Управление файлами и хостингом сайтов

#### Description and Priority

Эта функция позволяет пользователю загружать, удалять, просматривать и организовывать файлы своего веб-сайта через веб-интерфейс. Загруженные файлы должны быть доступны по привязанному домену. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Загрузка файла**
    *   *Стимул:* Пользователь через интерфейс перетаскивает файл в директорию своего сайта.
    *   *Ответ:* Система проверяет квоту на дисковое пространство, сохраняет файл в файловое хранилище, связанное с аккаунтом пользователя, и обновляет интерфейс.
-   **Сценарий 3: Создание директории**
    *   *Стимул:* Пользователь нажимает "Новая папка" и вводит имя.
    *   *Ответ:* Система создает новую директорию в текущем пути файловой системы пользователя.

#### Functional Requirements

-   **FILE-1**: Система должна проверять доступное дисковое пространство пользователя перед каждой загрузкой файла.
-   **FILE-2**: Система должна изолировать файловые пространства разных пользователей.
-   **FILE-3**: Корневая директория сайта пользователя должна быть доступна для чтения веб-сервером.

### Управление доменными именами

#### Description and Priority

Позволяет пользователю привязывать доменные имена к своему хостинговому аккаунту, а также управлять этими привязками (добавлять, удалять, настраивать). Приоритет: Средний.

#### Stimulus/Response Sequences

-   **Сценарий 1: Добавление домена**
    *   *Стимул:* Пользователь вводит имя домена (например, `my-site.com`) в панели управления.
    *   *Ответ:* Система проверяет формат домена, резервирует его за пользователем и предоставляет DNS-записи, которые необходимо прописать у регистратора.
-   **Сценарий 2: Активация домена**
    *   *Стимул:* Пользователь корректно настроил DNS-записи.
    *   *Ответ:* После проверки доступности домена система начинает маршрутизировать запросы на этот домен к файлам пользователя.

#### Functional Requirements

-   **DOM-1**: Система должна позволять пользователю привязывать несколько доменов и поддоменов к своему аккаунту (в зависимости от тарифа).
-   **DOM-2**: Система должна проверять уникальность домена в рамках сервиса.
-   **DOM-3**: Система должна хранить связь между доменным именем и корневой директорией сайта пользователя.

### Мониторинг и аналитика

#### Description and Priority

Функция предоставляет пользователю информацию об использовании ресурсов: объем дискового пространства, потребленный трафик, нагрузка на базу данных. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий: Просмотр статистики**
-   *Стимул:* Пользователь открывает вкладку "Статистика" в панели управления.
-   *Ответ:* Система запрашивает агрегированные данные из БД за выбранный период (трафик, количество запросов) и отображает их в виде графиков и диаграмм.

#### Functional Requirements

-   **MON-1**: Система должна собирать и хранить данные о потребленном трафике для каждого сайта.
-   **MON-2**: Система должна вычислять и отображать текущее использование дискового пространства.
-   **MON-3**: Система должна предоставлять график посещаемости за выбранный период.

### Система биллинга и управления подпиской

#### Description and Priority

Позволяет пользователю выбирать, изменять тарифный план, отслеживать состояние счета и производить оплату. Автоматически применяет ограничения тарифного плана. Приоритет: Средний/Низкий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Смена тарифного плана**
    *   *Стимул:* Пользователь выбирает новый тарифный план "Pro" и нажимает "Перейти".
    *   *Ответ:* Система рассчитывает стоимость апгрейда, перенаправляет пользователя на страницу оплаты. После подтверждения оплаты система немедленно расширяет лимиты (диск, базы данных и т.д.).
-   **Сценарий 2: Превышение лимита**
    *   *Стимул:* Использование дискового пространства пользователем превысило лимит по тарифу.
    *   *Ответ:* Система блокирует возможность загрузки новых файлов и отправляет уведомление пользователю по email.

#### Functional Requirements

-   **BILL-1**: Система должна хранить информацию о тарифных планах и их ограничениях (диск, трафик, кол-во доменов).
-   **BILL-2**: Система должна автоматически применять ограничения текущего тарифного плана пользователя.
-   **BILL-3**: При попытке пользователя выполнить действие, превышающее лимит тарифа, система должна блокировать это действие и уведомлять пользователя.
