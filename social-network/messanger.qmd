# Мессенджер

## Overall Description

Реализовать проект представляющий онлайн мессенджер с возможностью обмена текстовыми сообщениями в реальном времени между пользователями.

## Product Functions

- Регистрация и аутентификация пользователей
- Управление профилем пользователя
- Поиск и добавление контактов
- Обмен личными сообщениями между пользователями
- Создание и управление групповыми чатами
- Отправка и получение сообщений в реальном времени
- История сообщений в чатах
- Показатели онлайн-статуса пользователей
- Возможность удаления сообщений

## System Features


### Управление профилем пользователя

#### Description and Priority

Позволяет аутентифицированному пользователю управлять информацией в своем профиле и настройками. Приоритет: Высокий.

#### Stimulus/Response Sequences

- **Сценарий 1:** Обновление профиля
  * *Стимул:* Пользователь редактирует информацию в профиле (аватар, статус, информация о себе) и сохраняет изменения.
  * *Ответ:* Система обновляет данные в БД и отображает актуальную информацию.
- **Сценарий 2:** Изменение настроек приватности
  * *Стимул:* Пользователь изменяет настройки видимости профиля для других пользователей.
  * *Ответ:* Система сохраняет настройки и применяет их при последующих запросах к профилю.

#### Functional Requirements

- **PROF-1**: Пользователь должен иметь возможность загружать и изменять аватар профиля.
- **PROF-2**: Пользователь должен иметь возможность устанавливать текстовый статус.
- **PROF-3**: Система должна предоставлять функции для получения информации о профиле любого пользователя.
- **PROF-4**: Пользователь должен иметь возможность настраивать видимость своего профиля (всем, только контактам, никем).
- **PROF-5**: Система должна валидировать загружаемые изображения аватаров на размер и формат.

### Управление контактами

#### Description and Priority

Функция позволяет пользователям находить других пользователей, добавлять их в контакты и управлять списком контактов. Приоритет: Высокий.

#### Stimulus/Response Sequences

- **Сценарий 1:** Поиск пользователя
  - *Стимул:* Пользователь вводит логин, email или телефон в поисковую строку.
  - *Ответ:* Система возвращает список пользователей, соответствующих поисковому запросу, с учетом настроек приватности.
- **Сценарий 2:** Добавление в контакты
  - *Стимул:* Пользователь нажимает "Добавить в контакты" в профиле другого пользователя.
  - *Ответ:* Система создает запрос на добавление в контакты и уведомляет целевого пользователя.
- **Сценарий 3:** Подтверждение добавления в контакты
  - *Стимул:* Пользователь подтверждает запрос на добавление в контакты.
  - *Ответ:* Система добавляет пользователей в контакты друг другу и обновляет списки контактов.

#### Functional Requirements
- **CONT-1**: Система должна предоставлять функции для поиска пользователей по логину, email или телефону.
- **CONT-2**: Система должна поддерживать систему запросов на добавление в контакты.
- **CONT-3**: Пользователь должен иметь возможность отклонить запрос на добавление в контакты.
- **CONT-4**: Система должна отображать текущий статус контакта (онлайн, офлайн, недавно был в сети).
- **CONT-5**: Пользователь должен иметь возможность удалять контакты из своего списка.

### Личные сообщения

#### Description and Priority

Функция позволяет пользователям обмениваться личными сообщениями в реальном времени. Приоритет: Высокий.

#### Stimulus/Response Sequences

- **Сценарий 1:** Отправка сообщения
  * *Стимул:* Пользователь вводит текст сообщения в чате и нажимает отправить.
  * *Ответ:* Система сохраняет сообщение в БД, доставляет его получателю и обновляет интерфейс у отправителя.
- **Сценарий 2:** Получение сообщения
  * *Стимул:* Пользователь находится в онлайн и получает новое сообщение.
  * *Ответ:* Система отображает новое сообщение в интерфейсе, обновляет список чатов и показывает уведомление.
- **Сценарий 3:** Просмотр истории сообщений
  * *Стимул:* Пользователь открывает чат с другим пользователем.
  * *Ответ:* Система загружает историю сообщений из БД с пагинацией.

#### Functional Requirements

- **MSG-1**: Система должна сохранять все сообщения в базе данных.
- **MSG-2**: Система должна поддерживать доставку сообщений пользователям в офлайн режиме с последующей синхронизацией при подключении.
- **MSG-3**: Система должна предоставлять функции для получения истории сообщений с пагинацией.
- **MSG-4**: Пользователь должен иметь возможность удалять сообщения (для себя или для всех участников чата).
- **MSG-5**: Система должна отмечать сообщения как прочитанные при просмотре.

### Групповые чаты

#### Description and Priority

Функция позволяет пользователям создавать групповые чаты, управлять участниками и обмениваться сообщениями в группах. Приоритет: Средний.

#### Stimulus/Response Sequences

- **Сценарий 1:** Создание группового чата
  * *Стимул:* Пользователь нажимает "Создать группу", выбирает участников из контактов и задает название группы.
  * *Ответ:* Система создает групповой чат, добавляет выбранных участников и уведомляет их о добавлении.
- **Сценарий 2:** Отправка сообщения в группу
  * *Стимул:* Пользователь отправляет сообщение в групповой чат.
  * *Ответ:* Система сохраняет сообщение и доставляет его всем участникам группы.
- **Сценарий 3:** Добавление нового участника в группу
  * *Стимул:* Администратор группы добавляет нового участника.
  * *Ответ:* Система добавляет пользователя в группу, уведомляет всех участников и предоставляет новому участнику доступ к истории сообщений.

#### Functional Requirements

- **GRP-1**: Система должна позволять создавать групповые чаты с названием и аватаром.
- **GRP-2**: Создатель группы должен иметь права администратора.
- **GRP-3**: Администратор группы должен иметь возможность добавлять и удалять участников.
- **GRP-4**: Система должна поддерживать различные роли в группе (администратор, участник).
- **GRP-5**: Система должна доставлять сообщения всем онлайн-участникам группы и сохранять для офлайн-участников.
- **GRP-6**: Пользователь должен иметь возможность покинуть группу.

### Онлайн-статусы

#### Description and Priority

Функция отображает текущий статус подключения пользователей. Приоритет: Низкий.

#### Stimulus/Response Sequences

- **Сценарий 1:** Изменение статуса на онлайн
  * *Стимул:* Пользователь успешно аутентифицируется в системе.
  * *Ответ:* Система обновляет статус пользователя на "онлайн".
- **Сценарий 2:** Изменение статуса на офлайн
  * *Стимул:* Пользователь выходит из системы или соединение разрывается.
  * *Ответ:* Система обновляет статус пользователя на "офлайн" с временной меткой.

#### Functional Requirements

- **STAT-1**: Система должна отслеживать онлайн-статус пользователей.
- **STAT-2**: Система должна автоматически обновлять статус на "офлайн" при разрыве соединения.
- **STAT-3**: Контакты пользователя должны получать уведомления об изменении его статуса.
- **STAT-4**: Система должна отображать время последней активности для офлайн-пользователей.