# Платформа ставок на спорт

## Overall Description

Платформа должна предоставлять пользователям возможность делать ставки на различные спортивные события, управлять балансом и отслеживать историю ставок.

## Product Functions

- Регистрация и аутентификация пользователей
- Управление профилем и балансом пользователя
- Просмотр спортивных событий и маркетов
- Размещение ставок с различными типами пари
- Расчет выигрышей по завершенным событиям
- Административная панель для управления событиями
- Система кэшаута ставок
- История ставок и транзакций
- Система бонусов и промо-акций
- Live-ставки на текущие события

## System Features

### Управление спортивными событиями

#### Description and Priority

Функция позволяет администраторам создавать и управлять спортивными событиями, маркетами и коэффициентами. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий 1:** Создание нового события
- *Стимул:* Администратор добавляет футбольный матч с датой, командами, маркетами.
- *Ответ:* Система создает событие, рассчитывает начальные коэффициенты, публикует в календаре событий.

#### Functional Requirements

- **EVT-1**: Система должна поддерживать различные виды спорта (футбол, баскетбол, теннис)
- **EVT-2**: Для каждого события должны быть доступны основные маркеты (победа, тотал, фора)
- **EVT-3**: Коэффициенты должны обновляться в реальном времени
- **EVT-4**: Система должна автоматически закрывать ставки при завершении события

### Размещение ставок

#### Description and Priority

Функция позволяет пользователям размещать ставки на доступные события с валидацией и расчетом потенциального выигрыша. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий 1:** Успешное размещение ставки
- *Стимул:* Пользователь выбирает событие, маркет, вводит сумму ставки.
- *Ответ:* Система проверяет баланс, блокирует сумму, создает ставку с расчетом потенциального выигрыша.

#### Functional Requirements

- **BET-1**: Система должна проверять достаточность средств перед принятием ставки
- **BET-2**: Сумма ставки должна быть в пределах установленных лимитов
- **BET-3**: Коэффициент должен фиксироваться на момент размещения ставки
- **BET-4**: Система должна поддерживать ординары, экспрессы и системы

### Расчет результатов ставок

#### Description and Priority

Функция автоматического расчета выигрышей по завершенным событиям и обновления балансов пользователей. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий 1:** Расчет выигранной ставки
- *Стимул:* Администратор подтверждает результат матча.
- *Ответ:* Система рассчитывает выигрыш, разблокирует ставку, начисляет средства на баланс.

#### Functional Requirements

- **RES-1**: Система должна автоматически рассчитывать результаты для простых маркетов
- **RES-2**: Для сложных ставок должен применяться корректный алгоритм расчета
- **RES-3**: История расчетов должна сохраняться для аудита

### Live-ставки

#### Description and Priority

Функция позволяет размещать ставки на текущие события с динамически меняющимися коэффициентами. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий 1:** Ставка в live-режиме
- *Стимул:* Пользователь делает ставку на следующий гол в текущем матче.
- *Ответ:* Система валидирует ставку в течение 3 секунд, применяет актуальный коэффициент.

#### Functional Requirements

- **LIVE-1**: Коэффициенты должны обновляться каждые 10 секунд
- **LIVE-2**: Система должна поддерживать временную блокировку маркета при принятии ставки
- **LIVE-3**: Должна быть реализована защита от арбитража

### Система кэшаута

#### Description and Priority

Функция позволяет пользователям досрочно закрывать ставки с частичным возвратом средств. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий 1:** Досрочный выкуп ставки
- *Стимул:* Пользователь запрашивает кэшаут ставки до завершения события.
- *Ответ:* Система рассчитывает стоимость кэшаута на основе текущих коэффициентов, возвращает средства.

#### Functional Requirements

- **CASH-1**: Алгоритм расчета кэшаута должен учитывать текущие коэффициенты и вероятность
- **CASH-2**: Система должна взимать комиссию за операцию кэшаута
- **CASH-3**: Кэшаут должен быть доступен только для определенных типов ставок

### Административная панель

#### Description and Priority

Функция управления событиями, пользователями и финансовыми операциями для администраторов. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий 1:** Блокировка пользователя
- *Стимул:* Администратор обнаруживает подозрительную активность и блокирует аккаунт.
- *Ответ:* Система блокирует все операции пользователя, уведомляет security отдел.

#### Functional Requirements

- **ADM-1**: Система должна предоставлять веб-интерфейс для управления событиями
- **ADM-2**: Должны быть реализованы ролевые модели доступа (admin, moderator, operator)
- **ADM-3**: Все действия администратора должны логироваться

### Система бонусов и промо-акций

#### Description and Priority

Функция управления бонусными программами и промо-акциями для привлечения пользователей. Приоритет: Низкий.

#### Stimulus/Response Sequences

**Сценарий 1:** Активация промо-кода
- *Стимул:* Пользователь вводит промо-код при пополнении счета.
- *Ответ:* Система проверяет валидность кода, начисляет бонусные средства согласно условиям.

#### Functional Requirements

- **BON-1**: Система должна поддерживать различные типы бонусов (приветственный, депозитный, фрибет)
- **BON-2**: Должны быть реализованы условия отыгрыша бонусов
- **BON-3**: Статистика использования бонусов должна быть доступна для анализа

### Мобильный интерфейс

#### Description and Priority

Адаптивный веб-интерфейс для мобильных устройств с основным функционалом платформы. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий 1:** Размещение ставки с мобильного устройства
- *Стимул:* Пользователь через мобильный браузер выбирает событие и размещает ставку.
- *Ответ:* Система определяет мобильное устройство, отдает оптимизированную верстку, обрабатывает ставку.

#### Functional Requirements

- **MOB-1**: Интерфейс должен адаптироваться под различные размеры экранов
- **MOB-2**: Критический функционал должен быть доступен в мобильной версии
- **MOB-3**: Время загрузки страниц не должно превышать 3 секунд
