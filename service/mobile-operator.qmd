# Сервис управления мобильным тарифом

## Overall Description

Система предназначена для клиентов оператора, позволяя им самостоятельно выбирать, настраивать и отслеживать свои тарифы, а также для менеджеров, управляющих тарифными планами.

## Product Functions

*   Регистрация и аутентификация пользователей (клиентов и менеджеров)
*   Управление профилем клиента
*   Просмотр и выбор доступных тарифных планов
*   Смена текущего тарифного плана
*   Управление дополнительными услугами (подключение/отключение)
*   Просмотр детализации счета (история списаний и платежей)
*   Просмотр статистики использования услуг (трафик, минуты, SMS)
*   Пополнение баланса (симуляция, без интеграции с реальными платежными системами)
*   Управление тарифными планами и услугами (для менеджеров)
*   Просмотр клиентской базы (для менеджеров)

## System Features

### Управление тарифным планом клиента

#### Description and Priority

Позволяет клиенту просматривать свой текущий тариф, просматривать список всех доступных тарифов и менять свой тарифный план. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Просмотр текущего тарифа**
    *   *Стимул:* Клиент переходит в раздел "Мой тариф".
    *   *Ответ:* Система отображает название, стоимость, описание и детализацию по лимитам (минуты, SMS, гигабайты) его текущего тарифа.
-   **Сценарий 2: Смена тарифа**
    *   *Стимул:* Клиент на странице "Доступные тарифы" нажимает "Подключить" на одном из них.
    *   *Ответ:* Система проверяет баланс (если тариф платный), применяет новый тариф к учетной записи клиента (смена происходит немедленно или с следующего расчетного периода, в зависимости от бизнес-правила), создает соответствующую запись в истории операций.

#### Functional Requirements

-   **TAR-1**: Система должна отображать текущий тарифный план клиента.
-   **TAR-2**: Система должна предоставлять список всех активных тарифных планов с их стоимостью и описанием.
-   **TAR-3**: Клиент должен иметь возможность инициировать смену своего тарифного плана на любой другой активный тариф.
-   **TAR-4**: При смене тарифа система должна проверять, что баланс клиента неотрицательный (или достаточный для оплаты первого месяца, если тариф дороже текущего).

### Управление дополнительными услугами

#### Description and Priority

Позволяет клиенту просматривать, подключать и отключать дополнительные услуги (опции) к своему тарифу. Приоритет: Средний.

#### Stimulus/Response Sequences

-   **Сценарий 1: Подключение услуги**
    *   *Стимул:* Клиент в разделе "Дополнительные услуги" нажимает "Подключить" напротив услуги "Безлимитный мессенджер".
    *   *Ответ:* Система проверяет возможность подключения (нет конфликтов), списывает стоимость услуги с баланса (если она платная), активирует услугу для клиента и обновляет его список активных услуг.
-   **Сценарий 2: Отключение услуги**
    *   *Стимул:* Клиент в списке своих активных услуг нажимает "Отключить".
    *   *Ответ:* Система помечает услугу для отключения (следующего числа или немедленно) и прекращает ее списание.

#### Functional Requirements

-   **SVC-1**: Система должна предоставлять клиенту список всех доступных для подключения дополнительных услуг.
-   **SVC-2**: Система должна отображать список активных у клиента услуг.
-   **SVC-3**: Клиент должен иметь возможность подключить доступную услугу при условии достаточного баланса.
-   **SVC-4**: Клиент должен иметь возможность отключить любую из своих активных услуг.

### Просмотр статистики использования и детализации счета

#### Description and Priority

Позволяет клиенту отслеживать расход минут, SMS и интернет-трафика, а также просматривать историю всех финансовых операций. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Просмотр статистики использования**
    *   *Стимул:* Клиент переходит в раздел "Моя статистика" и выбирает текущий месяц.
    *   *Ответ:* Система отображает графики и цифры: количество использованных минут (из лимита тарифа), количество израсходованных SMS и гигабайт интернета.
-   **Сценарий 2: Просмотр детализации счета**
    *   *Стимул:* Клиент переходит в раздел "История операций" и выбирает период.
    *   *Ответ:* Система отображает таблицу с датой, типом операции (списание за тариф, пополнение, списание за услугу) и суммой.

#### Functional Requirements

-   **STAT-1**: Система должна вычислять и отображать количество использованных услуг (минуты, SMS, ГБ) за текущий расчетный период.
-   **STAT-2**: Система должна отображать историю всех финансовых операций (пополнения и списания) по счету клиента.
-   **STAT-3**: Данные должны быть доступны для фильтрации по периоду (текущий месяц, предыдущий месяц и т.д.).

### Пополнение баланса

#### Description and Priority

Позволяет клиенту симулировать пополнение своего лицевого счета. (В учебных целях интеграция с реальными платежными системами не предусмотрена). Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий: Успешное пополнение**

-   *Стимул:* Клиент в разделе "Пополнение баланса" вводит сумму (например, 100 рублей) и нажимает "Оплатить".
-   *Ответ:* Система создает в БД запись о зачислении указанной суммы на баланс клиента, обновляет значение его текущего баланса и перенаправляет его в личный кабинет с сообщением об успехе.

#### Functional Requirements

-   **PAY-1**: Система должна предоставлять интерфейс для ввода суммы пополнения.
-   **PAY-2**: Система должна увеличивать баланс клиента на указанную сумму и регистрировать эту операцию в истории.

### Управление тарифами и услугами (для менеджера)

#### Description and Priority

Позволяет менеджеру создавать, просматривать, редактировать и деактивировать тарифные планы и дополнительные услуги. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Создание нового тарифа**
    *   *Стимул:* Менеджер в панели управления переходит в "Управление тарифами" -> "Создать тариф", вводит название, описание, стоимость, задает лимиты по минутам, SMS и ГБ и нажимает "Сохранить".
    *   *Ответ:* Система сохраняет новый тарифный план в БД с статусом "Активен".
-   **Сценарий 2: Редактирование услуги**
    *   *Стимул:* Менеджер в списке услуг нажимает "Редактировать" у услуги "Международные звонки", изменяет ее стоимость и сохраняет.
    *   *Ответ:* Система обновляет данные об услуге в БД. (Примечание: изменение может не затрагивать клиентов, уже подключивших услугу по старой цене, в зависимости от бизнес-логики).

#### Functional Requirements

-   **MGR-1**: Система должна предоставлять интерфейс для выполнения полного цикла CRUD (Create, Read, Update, Delete) над тарифными планами.
-   **MGR-2**: Система должна предоставлять интерфейс для выполнения полного цикла CRUD над дополнительными услугами.
-   **MGR-3**: Система должна предоставлять возможность просмотра списка всех зарегистрированных клиентов с информацией об их текущем тарифе и балансе.