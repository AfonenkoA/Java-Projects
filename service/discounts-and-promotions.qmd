# Сервис скидок и акций

## Overall Description

Реализовать web-сервис для агрегации скидок и акций из различных магазинов и сервисов, аналогичный функционалу slivki.by. Система должна предоставлять пользователям централизованный доступ к информации о текущих акциях, скидках и специальных предложениях.

## Product Functions

- Регистрация и аутентификация пользователей
- Управление профилем пользователя
- Публикация и модерация акций
- Категоризация и тегирование акций
- Поиск и фильтрация акций
- Система избранных акций
- Комментирование и оценка акций
- Управление магазинами и компаниями
- Система уведомлений
- Административная панель

## System Features

### Управление профилем пользователя

#### Description and Priority

Позволяет аутентифицированному пользователю просматривать и редактировать информацию в своем профиле, управлять настройками уведомлений. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий:** Редактирование профиля
- *Стимул:* Пользователь переходит в раздел "Мой профиль", редактирует информацию (имя, фамилия, аватар, предпочтения) и сохраняет изменения.
- *Ответ:* Система валидирует данные, обновляет информацию в БД и возвращает обновленный профиль.

#### Functional Requirements

- **PROF-1**: Система должна предоставлять функцию для получения профиля текущего пользователя.
- **PROF-2**: Система должна предоставлять функцию для обновления профиля пользователя.
- **PROF-3**: Система должна позволять загружать и изменять аватар пользователя.
- **PROF-4**: Система должна сохранять пользовательские предпочтения (категории интересов, настройки уведомлений).

### Управление акциями и скидками

#### Description and Priority

Функция позволяет администраторам и партнерам создавать, редактировать и управлять акциями. Приоритет: Высокий.

#### Stimulus/Response Sequences

- **Сценарий 1:** Создание новой акции
  * *Стимул:* Администратор заполняет форму создания акции: название, описание, категория, магазин, даты действия, условия.
  * *Ответ:* Система сохраняет акцию в статусе "на модерации" и уведомляет модераторов.  
- **Сценарий 2:** Публикация акции
  * *Стимул:* Модератор проверяет и одобряет акцию.
  * *Ответ:* Система меняет статус акции на "активно" и добавляет ее в общий каталог.

#### Functional Requirements

- **DEAL-1**: Система должна предоставлять функции для управления акциями.
- **DEAL-2**: Система должна поддерживать статусы акций: черновик, на модерации, активно, завершено, отклонено.
- **DEAL-3**: Система должна валидировать даты начала и окончания акции.
- **DEAL-4**: Система должна автоматически архивировать завершенные акции.
- **DEAL-5**: Система должна подсчитывать количество просмотров для каждой акции.
- **DEAL-6**: Система должна поддерживать различные типы скидок (процент, фиксированная сумма, промокод).

### Система категорий и тегов

#### Description and Priority

Организация акций по категориям и тегам для улучшения навигации и поиска. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий:** Добавление акции в категорию
- *Стимул:* При создании акции администратор выбирает одну или несколько категорий и добавляет теги.
- *Ответ:* Система связывает акцию с выбранными категориями и тегами.

#### Functional Requirements

- **CAT-1**: Система должна предоставлять функции для получения дерева категорий.
- **CAT-2**: Система должна поддерживать иерархическую структуру категорий.
- **CAT-3**: Система должна предоставлять функции для управления тегами.
- **CAT-4**: Система должна автоматически предлагать популярные теги при создании акции.
- **CAT-5**: Система должна обеспечивать связь многие-ко-многим между акциями и тегами.

### Поиск и фильтрация акций

#### Description and Priority

Предоставление пользователям мощного инструмента для поиска и фильтрации акций по различным критериям. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий:** Поиск акций с фильтрами
- *Стимул:* Пользователь вводит поисковый запрос, выбирает категории, устанавливает диапазон скидок и сортировку.
- *Ответ:* Система возвращает paginated список релевантных акций, соответствующих критериям.

#### Functional Requirements

- **SRCH-1**: Система должна предоставлять полнотекстовый поиск по названию и описанию акций.
- **SRCH-2**: Система должна поддерживать фильтрацию по категориям, магазинам, диапазону скидок, дате публикации.
- **SRCH-3**: Система должна поддерживать сортировку по релевантности, дате, популярности, размеру скидки.
- **SRCH-4**: Система должна кэшировать популярные поисковые запросы.

### Система избранного

#### Description and Priority

Позволяет пользователям сохранять понравившиеся акции для последующего просмотра. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий:** Добавление акции в избранное
- *Стимул:* Пользователь нажимает "Добавить в избранное" на странице акции.
- *Ответ:* Система добавляет акцию в список избранного пользователя и подтверждает действие.

#### Functional Requirements

- **FAV-1**: Система должна предоставлять функции для добавления/удаления акции из избранного.
- **FAV-2**: Система должна предоставлять функции для получения списка избранных акций пользователя.
- **FAV-3**: Система должна проверять, добавлена ли акция в избранное текущего пользователя.
- **FAV-4**: Система должна ограничивать максимальное количество избранных акций на пользователя.

### Комментарии и оценки

#### Description and Priority

Функция взаимодействия пользователей через комментарии и оценки акций. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий:** Добавление комментария
- *Стимул:* Пользователь вводит текст комментария и нажимает "Отправить".
- *Ответ:* Система сохраняет комментарий, обновляет счетчик комментариев и отображает новый комментарий.

#### Functional Requirements

- **COMM-1**: Система должна предоставлять функции для добавления комментариев к акциям.
- **COMM-2**: Система должна поддерживать модерацию комментариев.
- **COMM-3**: Система должна предоставлять функции для оценки акций (лайк/дизлайк).
- **COMM-4**: Система должна рассчитывать и хранить рейтинг акции на основе оценок.
- **COMM-5**: Система должна предоставлять функции для получения комментариев с пагинацией.

### Управление магазинами и компаниями

#### Description and Priority

Функция управления информацией о магазинах и компаниях, предлагающих акции. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий:** Добавление нового магазина
- *Стимул:* Администратор заполняет информацию о магазине: название, описание, логотип, контакты, сайт.
- *Ответ:* Система сохраняет магазин и делает его доступным для привязки к акциям.

#### Functional Requirements

- **STORE-1**: Система должна предоставлять функции для управления магазинами.
- **STORE-2**: Система должна хранить контактную информацию и ссылки на социальные сети магазинов.
- **STORE-3**: Система должна подсчитывать количество активных акций для каждого магазина.
- **STORE-4**: Система должна рассчитывать средний рейтинг магазина на основе оценок акций.
- **STORE-5**: Система должна предоставлять функции для получения списка магазинов.

### Административная панель

#### Description and Priority

Функция управления системой для администраторов и модераторов. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий:** Модерация акции
- *Стимул:* Модератор просматривает акцию, ожидающую модерации, и принимает решение (одобрить/отклонить).
- *Ответ:* Система обновляет статус акции и уведомляет создателя.

#### Functional Requirements

- **ADMIN-1**: Система должна предоставлять функции для получения списка акций на модерации.
- **ADMIN-2**: Система должна предоставлять функции для изменения статуса акций.
- **ADMIN-3**: Система должна предоставлять статистику по активности пользователей и акциям.
- **ADMIN-4**: Система должна предоставлять управление пользователями (блокировка, назначение ролей).
- **ADMIN-5**: Система должна вести лог административных действий.
