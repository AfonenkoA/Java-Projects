# Веб сервис база знаний о кинематографе

## Overall Description

Сервис предоставляет пользователям возможность просматривать, искать и редактировать информацию о фильмах, актерах, режиссерах, а также составлять собственные списки и оставлять рецензии.

## Product Functions

-   Регистрация и аутентификация пользователей с системой ролей (Пользователь, Редактор, Администратор).
-   Управление профилем пользователя.
-   Просмотр и расширенный поиск по каталогу фильмов, актеров, режиссеров и студий.
-   Добавление и редактирование информации о кинокартинах, персонах и студиях.
-   Система рецензий и оценок фильмов.
-   Составление пользовательских списков фильмов (например, "Смотреть позже", "Любимые фильмы").
-   Просмотр новостей и премьер в мире кино.

## System Features

### Управление профилем пользователя

#### Description and Priority

Позволяет аутентифицированному пользователю просматривать и редактировать информацию в своем публичном профиле. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий: Редактирование профиля**

-   *Стимул:* Пользователь переходит на страницу своего профиля, нажимает "Редактировать", изменяет данные (Аватар, Имя, Фамилия, "О себе") и сохраняет.
-   *Ответ:* Система обновляет информацию о пользователе в базе данных и отображает актуальные данные на странице профиля. Изменения видны при просмотре его профиля другими пользователями.

#### Functional Requirements

-   **PROF-1**: Пользователь должен иметь возможность просматривать свой профиль и профили других пользователей.
-   **PROF-2**: Пользователь должен иметь возможность редактировать информацию в своем профиле (Имя, Фамилия, Аватар, "О себе").
-   **PROF-3**: Система должна отображать в профиле пользователя его активность: оставленные рецензии, составленные списки и поставленные оценки.

### Управление кинематографическими сущностями (Фильмы, Персоны, Студии)

#### Description and Priority

Позволяет пользователям с соответствующей ролью (EDITOR, ADMIN) добавлять, редактировать и удалять информацию о фильмах, актерах, режиссерах и студиях. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Добавление нового фильма**
    *   *Стимул:* Редактор нажимает "Добавить фильм", заполняет форму (название, год, описание, жанр, выбирает режиссера и актеров из базы).
    *   *Ответ:* Система сохраняет новый фильм в БД, устанавливая связи с указанными персонами. Фильм становится виден в каталоге.
-   **Сценарий 2: Редактирование информации о персонаже**
    *   *Стимул:* Редактор находит страницу актера, нажимает "Редактировать", исправляет дату рождения и добавляет ссылку на фото.
    *   *Ответ:* Система обновляет информацию о персонаже в БД. Изменения немедленно отображаются на его странице.

#### Functional Requirements

-   **ENT-1**: Система должна предоставлять интерфейс для создания, чтения, обновления и удаления (CRUD) сущностей `Фильм`, `Персона`, `Студия`.
-   **ENT-2**: Сущность `Фильм` должна содержать поля: название, год выпуска, синопсис, продолжительность, жанры, режиссеры, актерский состав, студия-производитель, постер.
-   **ENT-3**: Сущность `Персона` должна содержать поля: полное имя, дата рождения, биография, фотография, список участия в фильмах (с разделением на "Актер" и "Режиссер").
-   **ENT-4**: Система должна поддерживать связь "Многие-ко-многим" между `Фильм` и `Персона` с указанием типа участия (роли).
-   **ENT-5**: Только пользователи с ролями `EDITOR` и `ADMIN` могут изменять и создавать сущности.

### Поиск и просмотр каталога

#### Description and Priority

Позволяет всем пользователям (включая гостей) осуществлять поиск и фильтрацию по обширной базе данных фильмов и персон. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Поиск фильма по названию**
    *   *Стимул:* Пользователь вводит в поисковую строку название фильма и нажимает "Найти".
    *   *Ответ:* Система возвращает страницу с результатами поиска, отсортированными по релевантности.
-   **Сценарий 2: Расширенная фильтрация**
    *   *Стимул:* Пользователь на странице каталога фильмов задает фильтры: "Жанр: Фантастика", "Год: с 2010 по 2020", "Рейтинг: выше 8.0".
    *   *Ответ:* Система обновляет список фильмов, отображая только те, которые соответствуют всем заданным критериям.

#### Functional Requirements

-   **SRCH-1**: Система должна предоставлять полнотекстовый поиск по названиям фильмов и именам персон.
-   **SRCH-2**: Система должна предоставлять возможность фильтровать фильмы по жанру, году выпуска, рейтингу, участию определенных актеров или режиссеров.
-   **SRCH-3**: Система должна отображать детальную страницу для каждой сущности (фильма, персоны, студии) со всей связанной информацией.

### Система рецензий и рейтингов

#### Description and Priority

Позволяет аутентифицированным пользователям оставлять текстовые рецензии и числовые оценки для фильмов, а также просматривать оценки и отзывы других пользователей. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Добавление рецензии**
    *   *Стимул:* Пользователь на странице фильма нажимает "Написать рецензию", вводит текст и выставляет оценку от 1 до 10.
    *   *Ответ:* Система сохраняет рецензию, привязывает ее к пользователю и фильму, пересчитывает средний рейтинг фильма.
-   **Сценарий 2: Просмотр рецензий**
    *   *Стимул:* Пользователь переходит на вкладку "Рецензии" на странице фильма.
    *   *Ответ:* Система отображает список всех рецензий, отсортированных по полезности или дате.

#### Functional Requirements

-   **REV-1**: Пользователь с ролью `USER` может оставить не более одной рецензии на один фильм.
-   **REV-2**: Рецензия должна содержать текстовое содержание и числовую оценку от 1 до 10.
-   **REV-3**: Система должна вычислять и отображать средний рейтинг фильма на основе всех пользовательских оценок.
-   **REV-4**: Пользователи могут отмечать рецензии других пользователей как "Полезные"/"Не полезные".
-   **REV-5**: Пользователь может редактировать или удалять только свои собственные рецензии.

### Управление пользовательскими списками фильмов

#### Description and Priority

Позволяет аутентифицированным пользователям создавать именованные списки фильмов (например, "Лучшее кино 90-х", "Для просмотра на выходные"), добавлять в них фильмы и делиться этими списками. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий: Создание нового списка**

-   *Стимул:* Пользователь в своем профиле нажимает "Создать список", вводит название и описание, затем начинает добавлять в него фильмы через поиск.
-   *Ответ:* Система создает новый список и отображает его в профиле пользователя. Список публично доступен по прямой ссылке.

#### Functional Requirements

-   **LIST-1**: Пользователь должен иметь возможность создавать, редактировать и удалять собственные списки.
-   **LIST-2**: Пользователь должен иметь возможность добавлять фильмы в список и удалять их из него.
-   **LIST-3**: Каждый список должен иметь название, описание и быть либо публичным, либо приватным.
-   **LIST-4**: Система должна отображать публичные списки пользователя на его странице профиля.

### Лента новостей и премьер

#### Description and Priority

Предоставляет пользователям централизованную ленту, где отображаются последние добавленные в базу фильмы, новости от администрации о премьерах и обновлениях сайта. Приоритет: Низкий.

#### Stimulus/Response Sequences

**Сценарий: Просмотр главной страницы**
-   *Стимул:* Пользователь открывает главную страницу сервиса.
-   *Ответ:* Система отображает ленту, содержащую блок "Скоро в кино" (фильмы с датой выхода в будущем), "Недавно добавленные" и "Популярные за неделю".

#### Functional Requirements

-   **NEWS-1**: Система должна отображать на главной странице карусель предстоящих премьер.
-   **NEWS-2**: Система должна отображать динамическую ленту с последними событиями (новые фильмы, рецензии).
-   **NEWS-3**: Администраторы должны иметь возможность создавать и закреплять новостные посты на главной странице.
