# Новостной портал

## Overall Description

Проект представляет собой классический новостной портал, позволяющий публиковать, категоризировать и просматривать новостные статьи. Ключевые возможности включают управление пользователями и ролями, создание и редактирование новостей, систему комментариев, тегирование и поиск.

## Product Functions


## System Features

### Управление ролями и правами доступа (Административный функционал)

#### Description and Priority

Позволяет администратору управлять пользователями и назначать им роли (Автор, Редактор). Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий: Назначение роли "Автор"**
-   *Стимул:* Администратор переходит в панель управления пользователями, выбирает пользователя с ролью "Пользователь" и назначает ему роль "Автор".
-   *Ответ:* Система обновляет роли пользователя в БД. Пользователь получает права на создание новостей.

#### Functional Requirements

-   **ROLE-1**: Только пользователь с ролью "Администратор" должен иметь доступ к панели управления пользователями.
-   **ROLE-2**: Система должна позволять администратору просматривать список всех пользователей.
-   **ROLE-3**: Система должна позволять администратору назначать и удалять роли "Автор" и "Редактор" для любого пользователя.
-   **ROLE-4**: Система должна запрещать администратору удалять роль "Администратор" у самого себя.

### Управление новостями

#### Description and Priority

Позволяет авторам создавать и редактировать свои черновики, а редакторам – публиковать, редактировать и архивировать любые новости. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Создание черновика новости**
    *   *Стимул:* Автор нажимает "Создать новость", заполняет заголовок, краткое описание, текст, выбирает категорию и теги, нажимает "Сохранить как черновик".
    *   *Ответ:* Система сохраняет новость в БД со статусом `DRAFT`.
-   **Сценарий 2: Публикация новости**
    *   *Стимул:* Редактор просматривает черновик и нажимает кнопку "Опубликовать".
    *   *Ответ:* Система меняет статус новости на `PUBLISHED` и устанавливает дату публикации. Новость становится видна всем пользователям на главной странице.
-   **Сценарий 3: Редактирование опубликованной новости**
    *   *Стимул:* Редактор находит опубликованную новость и нажимает "Редактировать".
    *   *Ответ:* Система позволяет изменить содержимое новости и сохраняет изменения. Может быть добавлена пометка "Отредактировано [Дата]".

#### Functional Requirements

-   **NEWS-1**: Пользователь с ролью "Автор" может создавать, просматривать и редактировать только свои новости со статусом `DRAFT`.
-   **NEWS-2**: Пользователь с ролью "Редактор" может просматривать все новости, независимо от статуса и автора.
-   **NEWS-3**: Пользователь с ролью "Редактор" может изменять статус новости: `DRAFT` -> `PUBLISHED`, `PUBLISHED` -> `ARCHIVED`.
-   **NEWS-4**: При создании новости система должна сохранять дату создания, автора и дату последнего изменения.
-   **NEWS-5**: Новость должна иметь следующие атрибуты: заголовок, краткое описание, полный текст, дата публикации, автор, категория, набор тегов, статус.

### Просмотр ленты новостей

#### Description and Priority

Функция предоставляет пользователям возможность просматривать ленту опубликованных новостей с пагинацией, фильтрацией и сортировкой. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий: Просмотр главной страницы с пагинацией**
    *   *Стимул:* Пользователь заходит на главную страницу.
    *   *Ответ:* Система отображает последние 10 опубликованных новостей (краткое описание, заголовок, дата, автор). Внизу страницы отображаются кнопки пагинации.
-   **Сценарий: Фильтрация по категории**
    *   *Стимул:* Пользователь выбирает категорию "Технологии" из выпадающего списка фильтров.
    *   *Ответ:* Система перезагружает страницу, отображая только новости из выбранной категории.

#### Functional Requirements

-   **FEED-1**: Система должна отображать на главной странице только новости со статусом `PUBLISHED`.
-   **FEED-2**: Система должна поддерживать пагинацию для списка новостей.
-   **FEED-3**: Система должна позволять фильтровать новости по категории и/или тегу.
-   **FEED-4**: Система должна позволять сортировать новости по дате публикации (сначала новые / сначала старые).

### Система комментариев

#### Description and Priority

Позволяет аутентифицированным пользователям оставлять комментарии к опубликованным новостям и отвечать на другие комментарии, формируя древовидную структуру. Приоритет: Средний.

#### Stimulus/Response Sequences

-   **Сценарий: Добавление комментария**
    *   *Стимул:* Аутентифицированный пользователь на странице новости вводит текст комментария и нажимает "Отправить".
    *   *Ответ:* Система сохраняет комментарий в БД, связывая его с новостью и пользователем, и динамически обновляет раздел комментариев.
-   **Сценарий: Ответ на комментарий**
    *   *Стимул:* Пользователь нажимает кнопку "Ответить" под существующим комментарием, вводит текст и отправляет.
    *   *Ответ:* Система сохраняет новый комментарий как дочерний по отношению к выбранному.

#### **3.5.3 Functional Requirements**

-   **COMM-1**: Только аутентифицированные пользователи могут оставлять комментарии.
-   **COMM-2**: Каждый комментарий должен содержать текст, автора, дату создания и ссылку на родительский комментарий (если есть).
-   **COMM-3**: Система должна отображать комментарии в древовидной структуре.
-   **COMM-4**: Пользователь с ролью "Редактор" или "Администратор" может удалять любые комментарии.

### Управление категориями и тегами

#### Description and Priority

Позволяет редакторам и администраторам управлять категориями и тегами для классификации новостей. Приоритет: Низкий.

#### Stimulus/Response Sequences

**Сценарий: Создание новой категории**
-   *Стимул:* Редактор переходит в раздел "Управление категориями", вводит название новой категории ("Наука") и нажимает "Создать".
-   *Ответ:* Система сохраняет новую категорию в БД.

#### Functional Requirements

-   **TAG-1**: Система должна предоставлять интерфейс для CRUD операций над категориями и тегами.
-   **TAG-2**: При создании новости автор должен иметь возможность выбирать категорию из существующего списка и добавлять теги.

### Поиск по новостям

#### Description and Priority

Предоставляет пользователям возможность осуществлять полнотекстовый поиск по заголовкам и содержимому опубликованных новостей. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий: Поиск по ключевому слову**
-   *Стимул:* Пользователь вводит в строку поиска "Java" и нажимает Enter.
-   *Ответ:* Система выполняет запрос к БД (используя полнотекстовый поиск PostgreSQL) и отображает страницу с результатами – всеми опубликованными новостями, где встречается слово "Java".

#### Functional Requirements

-   **SRCH-1**: Система должна предоставлять виджет поиска на каждой странице.
-   **SRCH-2**: Поиск должен осуществляться по заголовку, краткому и полному тексту новости.
-   **SRCH-3**: Результаты поиска должны отображаться на отдельной странице с пагинацией.
