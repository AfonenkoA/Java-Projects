# Сервис онлайн квизов

## Overall Description

Сервис позволяет пользователям проходить квизы на различные темы, а администраторам — создавать эти квизы и управлять ими. Система поддерживает аутентификацию, авторизацию, ведение истории попыток и формирование рейтингов.

## Product Functions

-   Регистрация, аутентификация и авторизация пользователей.
-   Управление профилем пользователя.
-   Управление квизами и вопросами (для администраторов).
-   Прохождение квизов.
-   Просмотр результатов и истории попыток.
-   Система рейтингов и лидербордов.
-   Таймер и ограничение по времени на прохождение квиза.

## System Features

### Управление профилем пользователя

#### Description and Priority

Позволяет аутентифицированному пользователю просматривать и редактировать информацию в своем профиле, а также просматривать свою статистику. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Просмотр профиля**
    *   *Стимул:* Пользователь нажимает на ссылку "Мой профиль".
    *   *Ответ:* Система отображает страницу профиля с информацией о пользователе (имя, дата регистрации, общая статистика по квизам).
-   **Сценарий 2: Редактирование профиля**
    *   *Стимул:* Пользователь нажимает "Редактировать", изменяет свое имя и сохраняет изменения.
    *   *Ответ:* Система обновляет информацию о пользователе в базе данных и отображает актуальные данные.

#### Functional Requirements

-   **PROF-1**: Пользователь должен иметь возможность просматривать свой профиль.
-   **PROF-2**: Пользователь должен иметь возможность редактировать свою публичную информацию (например, отображаемое имя).
-   **PROF-3**: Система должна отображать статистику пользователя в его профиле (количество пройденных квизов, средний балл).

### Управление квизами (для администраторов)

#### Description and Priority

Функция позволяет пользователям с ролью ADMIN создавать, редактировать, активировать и удалять квизы. Каждый квиз имеет название, описание, категорию, уровень сложности и временные ограничения. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Создание нового квиза**
    *   *Стимул:* Администратор переходит в панель управления, нажимает "Создать квиз", заполняет форму (название, описание, время на прохождение) и сохраняет.
    *   *Ответ:* Система создает новый квиз в статусе "Черновик" и перенаправляет администратора на страницу редактирования вопросов для этого квиза.
-   **Сценарий 2: Добавление вопроса к квизу**
    *   *Стимул:* Администратор на странице квиза нажимает "Добавить вопрос", вводит текст вопроса, тип вопроса (один выбор, множественный), варианты ответов и отмечает правильный ответ(ы).
    *   *Ответ:* Система сохраняет вопрос в базу данных и привязывает его к текущему квизу.

#### Functional Requirements

-   **QUIZ-MGMT-1**: Только пользователи с ролью ADMIN должны иметь доступ к функциям управления квизами.
-   **QUIZ-MGMT-2**: Система должна позволять создавать, читать, обновлять и удалять (CRUD) квизы.
-   **QUIZ-MGMT-3**: Каждый квиз должен иметь атрибуты: название, описание, категория, уровень сложности, время на прохождение (в секундах), статус (Черновик/Активный/Архивный).
-   **QUIZ-MGMT-4**: Система должна позволять прикреплять неограниченное количество вопросов к одному квизу.

### Управление вопросами (для администраторов)

#### Description and Priority

Функция позволяет администраторам управлять вопросами в рамках квизов. Поддерживаются вопросы с единственным и множественным выбором ответа. Приоритет: Высокий.

#### Stimulus/Response Sequences

**Сценарий 1: Создание вопроса с одним правильным ответом**

-   *Стимул:* Администратор выбирает тип вопроса "Один вариант", вводит текст вопроса и несколько вариантов ответа, отмечает один из них как верный.
-   *Ответ:* Система сохраняет вопрос и его варианты ответов. Правильный ответ помечается флагом в базе данных.

#### Functional Requirements

-   **QUEST-MGMT-1**: Система должна поддерживать типы вопросов: "Один правильный ответ" и "Множественный выбор".
-   **QUEST-MGMT-2**: Каждый вопрос должен иметь текст и принадлежать к одному квизу.
-   **QUEST-MGMT-3**: Для каждого вопроса система должна хранить набор возможных ответов.
-   **QUEST-MGMT-4**: Для каждого варианта ответа система должна хранить флаг, указывающий на его правильность.

### Прохождение квиза

#### Description and Priority

Функция позволяет аутентифицированным пользователям проходить активные квизы. Включает в себя постраничный вывод вопросов, таймер и финализацию попытки. Приоритет: Высокий.

#### Stimulus/Response Sequences

-   **Сценарий 1: Начало прохождения квиза**
    *   *Стимул:* Пользователь на странице списка квизов нажимает "Начать" на активном квизе.
    *   *Ответ:* Система создает новую "попытку" (Quiz Attempt), запускает таймер и показывает пользователю первый вопрос квиза.
-   **Сценарий 2: Ответ на вопрос и переход к следующему**
    *   *Стимул:* Пользователь выбирает вариант(ы) ответа и нажимает "Следующий вопрос".
    *   *Ответ:* Система сохраняет выбранные пользователем ответы для текущего вопроса и отображает следующий вопрос.
-   **Сценарий 3: Завершение квиза по таймеру**
    *   *Стимул:* Таймер истекает до того, как пользователь отправил все ответы.
    *   *Ответ:* Система автоматически завершает попытку, сохраняет все данные и перенаправляет пользователя на страницу с результатами.

#### Functional Requirements

-   **QUIZ-TAKE-1**: Система должна позволять пользователю начинать прохождение только активных квизов.
-   **QUIZ-TAKE-2**: Система должна отображать один вопрос за раз.
-   **QUIZ-TAKE-3**: Система должна отслеживать оставшееся время для завершения квиза и автоматически завершать попытку по его истечении.
-   **QUIZ-TAKE-4**: Система должна сохранять каждый выбранный пользователем ответ по мере прохождения квиза.

### Расчет результата и отображение итогов

#### Description and Priority

После завершения попытки система подсчитывает количество правильных ответов, выставляет итоговый балл и показывает детализированный результат пользователю. Приоритет: Средний.

#### Stimulus/Response Sequences

**Сценарий 1: Успешное завершение попытки**

-   *Стимул:* Пользователь отвечает на последний вопрос и нажимает "Завершить".
-   *Ответ:* Система вычисляет результат (количество правильных ответов), сохраняет итог попытки в БД и отображает страницу с результатом, показывая правильные и неправильные ответы пользователя.

#### Functional Requirements

-   **RESULT-1**: Система должна вычислять результат попытки после ее завершения.
-   **RESULT-2**: Система должна отображать пользователю итоговый балл, потраченное время и детали по каждому вопросу (его ответ vs. правильный ответ).
-   **RESULT-3**: Результат попытки должен быть постоянно сохранен в истории.

### Просмотр истории попыток и рейтинга

#### Description and Priority

Позволяет пользователю просматривать историю всех своих попыток и общий рейтинг, основанный на среднем балле или количестве пройденных квизов. Приоритет: Средний.

#### Stimulus/Response Sequences

-   **Сценарий 1: Просмотр истории**
    *   *Стимул:* Пользователь переходит на вкладку "История".
    *   *Ответ:* Система отображает таблицу с ранее пройденными квизами, датой прохождения и набранным баллом.
-   **Сценарий 2: Просмотр рейтинга**
    *   *Стимул:* Пользователь переходит на вкладку "Рейтинг".
    *   *Ответ:* Система отображает список пользователей, отсортированный по убыванию их общего рейтинга.

#### Functional Requirements

-   **HIST-1**: Система должна предоставлять пользователю список всех его попыток.
-   **HIST-2**: Система должна рассчитывать и отображать рейтинг пользователей.
-   **HIST-3**: Пользователь должен иметь возможность фильтровать историю по квизам или дате.
