# Цветочный магазин

## **2. Общее описание**

Проект представляет собой полнофункциональный онлайн-магазин по продаже цветов, букетов и сопутствующих товаров (горшки, открытки, мягкие игрушки). Система предоставляет интуитивно понятный интерфейс для клиентов и мощный инструментарий для администраторов.

## **3. Функции продукта**

*   Регистрация, аутентификация и авторизация пользователей.
*   Управление профилем клиента и историей заказов.
*   Просмотр и поиск по каталогу товаров.
*   Управление корзиной покупок.
*   Оформление и отслеживание заказов.
*   Интеграция с платежным шлюзом (симуляция).
*   Управление товарами, категориями и товарами (администратор).
*   Управление заказами и клиентами (администратор).
*   Просмотр аналитики и отчетов (администратор).

## **4. Системные функции**

### **4.2 Управление каталогом товаров**

#### **4.2.1 Description and Priority**

Функция позволяет клиентам просматривать, искать и фильтровать товары в каталоге. Администраторам — управлять товарами и категориями. Приоритет: Высокий.

#### **4.2.2 Stimulus/Response Sequences**

-   **Сценарий 1: Просмотр каталога**
    *   *Стимул:* Клиент переходит в раздел "Каталог".
    *   *Ответ:* Система отображает сетку товаров с изображениями, названиями и ценами.
-   **Сценарий 2: Поиск и фильтрация**
    *   *Стимул:* Клиент вводит поисковый запрос ("розы") и применяет фильтр по категории "Букеты".
    *   *Ответ:* Система отображает только те товары, которые соответствуют запросу и выбранной категории.
-   **Сценарий 3: Добавление нового товара (Администратор)**
    *   *Стимул:* Администратор в панели управления нажимает "Добавить товар", заполняет форму (название, описание, цена, категория, изображение) и сохраняет.
    *   *Ответ:* Система сохраняет товар в базу данных и отображает его в каталоге.

#### **4.2.3 Functional Requirements**

*   **CAT-1**: Система должна отображать каталог товаров, сгруппированных по категориям.
*   **CAT-2**: Система должна предоставлять текстовый поиск по названию и описанию товара.
*   **CAT-3**: Система должна предоставлять фильтрацию товаров по категориям, цене и наличию.
*   **CAT-4**: Система должна позволять администратору создавать, редактировать и деактивировать товары.
*   **CAT-5**: Система должна позволять администратору управлять категориями товаров (создание, редактирование, удаление).

### **4.3 Управление корзиной покупок**

#### **4.3.1 Description and Priority**

Функция позволяет аутентифицированным и неаутентифицированным клиентам добавлять товары в корзину, изменять количество и удалять товары. Приоритет: Высокий.

#### **4.3.2 Stimulus/Response Sequences**

-   **Сценарий 1: Добавление товара в корзину**
    *   *Стимул:* Клиент нажимает кнопку "В корзину" на странице товара.
    *   *Ответ:* Система добавляет товар в корзину, обновляет счетчик товаров в заголовке сайта и показывает всплывающее уведомление об успехе.
-   **Сценарий 2: Изменение количества товара в корзине**
    *   *Стимул:* На странице корзины клиент изменяет количество определенного товара.
    *   *Ответ:* Система немедленно пересчитывает и отображает новую итоговую сумму.
-   **Сценарий 3: Вход с непустой корзиной**
    *   *Стимул:* Гость с товарами в корзине (сохраненной в session/cookies) успешно входит в систему.
    *   *Ответ:* Система объединяет товары из корзины гостя с корзиной аутентифицированного пользователя.

#### **4.3.3 Functional Requirements**

*   **CART-1**: Система должна позволять добавлять товары в корзину без обязательной аутентификации.
*   **CART-2**: Система должна сохранять состояние корзины между запросами (используя сессию или cookies).
*   **CART-3**: Система должна отображать содержимое корзины с итоговой суммой.
*   **CART-4**: Система должна позволять изменять количество или удалять любой товар из корзины.
*   **CART-5**: При входе пользователя система должна объединять корзину гостя с корзиной пользователя.

### **4.4 Оформление и обработка заказа**

#### **4.4.1 Description and Priority**

Функция позволяет аутентифицированному клиенту оформить заказ, выбрав адрес доставки, время и способ оплаты. Приоритет: Высокий.

#### **4.4.2 Stimulus/Response Sequences**

-   **Сценарий 1: Создание заказа**
    *   *Стимул:* Клиент из корзины переходит к оформлению заказа, выбирает адрес доставки, дату и время, указывает получателя и нажимает "Оформить заказ".
    *   *Ответ:* Система создает заказ в статусе "Ожидает оплаты", резервирует товары на складе и перенаправляет на страницу оплаты.
-   **Сценарий 2: Успешная оплата (симуляция)**
    *   *Стимул:* Клиент на странице оплаты нажимает "Оплатить".
    *   *Ответ:* Система меняет статус заказа на "Оплачен", отправляет клиенту email-подтверждение и уведомляет администратора о новом заказе.
-   **Сценарий 3: Отмена заказа**
    *   *Стимул:* Клиент в своем профиле нажимает "Отменить заказ" для заказа в статусе "Ожидает оплаты".
    *   *Ответ:* Система меняет статус заказа на "Отменен" и снимает резерв с товаров.

#### **4.4.3 Functional Requirements**

*   **ORD-1**: Система должна позволять аутентифицированному клиенту создать заказ на основе содержимого корзины.
*   **ORD-2**: Система должна запрашивать у клиента адрес доставки, дату/время доставки и контактные данные получателя.
*   **ORD-3**: Система должна резервировать количество товаров в заказе на складе при его создании.
*   **ORD-4**: Система должна интегрироваться с платежным шлюзом (или симулировать интеграцию) для обработки оплаты.
*   **ORD-5**: Система должна отправлять email-уведомления клиенту при смене статуса заказа (подтвержден, передан курьеру, доставлен).

### **4.5 Управление заказами (Административная панель)**

#### **4.5.1 Description and Priority**

Функция позволяет администратору просматривать, фильтровать и изменять статусы всех заказов в системе. Приоритет: Высокий.

#### **4.5.2 Stimulus/Response Sequences**

-   **Сценарий 1: Просмотр списка заказов**
    *   *Стимул:* Администратор заходит в раздел "Заказы".
    *   *Ответ:* Система отображает таблицу со всеми заказами, с возможностью фильтрации по статусу и дате.
-   **Сценарий 2: Изменение статуса заказа**
    *   *Стимул:* Администратор выбирает заказ и меняет его статус с "Оплачен" на "Собирается".
    *   *Ответ:* Система обновляет статус заказа в БД и, при необходимости, отправляет уведомление клиенту.

#### **4.5.3 Functional Requirements**

*   **ADM-ORD-1**: Система должна предоставлять интерфейс для просмотра всех заказов.
*   **ADM-ORD-2**: Система должна позволять фильтровать заказы по статусу, дате и ID.
*   **ADM-ORD-3**: Система должна позволять администратору вручную изменять статус заказа.
*   **ADM-ORD-4**: Система должна отображать полную информацию о заказе: состав, данные клиента, данные для доставки, историю статусов.


### **4.6 Управление товарами (Склад)**

#### **4.6.1 Description and Priority**

Функция позволяет системе отслеживать количество товаров на складе и автоматически управлять их резервированием при создании и отмене заказов. Приоритет: Средний.

#### **4.6.2 Stimulus/Response Sequences**

-   **Сценарий 1: Резервирование при заказе**
    *   *Стимул:* Клиент создает заказ, содержащий 5 роз.
    *   *Ответ:* Система уменьшает доступное количество роз на складе на 5 единиц.
-   **Сценарий 2: Возврат при отмене заказа**
    *   *Стимул:* Клиент отменяет заказ с 5 розами.
    *   *Ответ:* Система возвращает 5 роз в доступное количество на складе.

#### **4.6.3 Functional Requirements**

*   **INV-1**: Для каждого товара система должна хранить общее количество и доступное количество (за вычетом забронированного).
*   **INV-2**: Система должна автоматически резервировать товары при создании заказа.
*   **INV-3**: Система должна автоматически снимать резерв с товаров при отмене заказа или истечении времени на оплату.
*   **INV-4**: Система не должна позволять добавлять в корзину больше товара, чем доступно на складе.
